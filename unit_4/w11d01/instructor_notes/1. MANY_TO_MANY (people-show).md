# Many to Many Relationships Part 2 - People Show Route

## Show a person and their jobs

In `app/models/person.rb`:

```ruby
class Person
    attr_reader :id, :name, :age, :home, :employers # add employers

    #...

    def initialize(opts)
        @id = opts["id"].to_i
        @name = opts["name"]
        @age = opts["age"].to_i
        if opts["home"]
            @home = opts["home"]
        end
        # add @employers attribute
        if opts["employers"]
            @employers = opts["employers"]
        end
    end

    #...

    def self.find(id)
        results = DB.exec(
            <<-SQL
                SELECT
                    people.*,
                    locations.street,
                    locations.city,
                    locations.state,
                    companies.id AS company_id, -- add company.id
                    companies.name AS company, -- add company.name
                    companies.industry -- add company.industry
                FROM people
                LEFT JOIN locations
                    ON people.home_id = locations.id
                LEFT JOIN jobs -- left join on jobs
                    ON people.id = jobs.person_id
                LEFT JOIN companies -- left join companies onto jobs
                    ON jobs.company_id = companies.id
                WHERE people.id=#{id};
            SQL
        )
        result = results.first
        if result["home_id"]
            home = Location.new(
                {
                    "id" => result["home_id"],
                    "street" => result["street"],
                    "city" => result["city"],
                    "state" => result["state"],
                }
            )
        end

        # add employers
        employers = []
        results.each do |result|
            if result["company_id"]
                employers.push(Company.new({
                    "id" => result["company_id"],
                    "name" => result["company"],
                    "industry" => result["industry"],
                }))
            end
        end

        person =  Person.new(
            {
                "id" => result["id"],
                "name" => result["name"],
                "age" => result["age"],
                "home" => home,
                "employers" => employers #add employers to data for person
            }
        )
        return person
    end

    #...    
end
```
